{
  "permissions": {
    "allow": [
      "Bash(cd:*)",
      "Bash(cd /c/Users/aland/polybot && venv/Scripts/python.exe -c \"\nimport asyncio, logging\nlogging.basicConfig\\(level=logging.INFO, format='%\\(message\\)s'\\)\nfrom apis.ws_client import PolymarketWSClient, MARKET_WS_URL\nfrom apis.book_cache import BookCache\nimport websockets\n\nasync def test\\(\\):\n    # Use a real token_id from Polymarket \\(BTC price market\\)\n    token_id = '21742633143463906290569050155826241533067272736897614950488156847949938836455'\n    cache = BookCache\\(\\)\n    client = PolymarketWSClient\\([token_id], cache\\)\n\n    snapshots = []\n    async def cb\\(tid, c\\):\n        snapshots.append\\({'token': tid, 'ask': c.best_ask\\(tid\\), 'bid': c.best_bid\\(tid\\)}\\)\n\n    client.on_update\\(cb\\)\n\n    try:\n        await asyncio.wait_for\\(client.run\\(\\), timeout=5\\)\n    except asyncio.TimeoutError:\n        pass\n\n    print\\(f'Stats: {client.stats}'\\)\n    if snapshots:\n        print\\(f'First update: {snapshots[0]}'\\)\n        print\\(f'Total callbacks fired: {len\\(snapshots\\)}'\\)\n    else:\n        print\\('No updates received in 5s \\(market may be inactive\\)'\\)\n\nasyncio.run\\(test\\(\\)\\)\n\" 2>&1)",
      "Bash(cd /c/Users/aland/polybot && venv/Scripts/python.exe -c \"\nimport asyncio, websockets\n\nasync def probe\\(url\\):\n    try:\n        async with websockets.connect\\(url\\) as ws:\n            print\\(f'CONNECTED: {url}'\\)\n            return True\n    except Exception as e:\n        print\\(f'FAIL {url}: {e}'\\)\n        return False\n\nasync def main\\(\\):\n    urls = [\n        'wss://clob.polymarket.com/ws',\n        'wss://clob.polymarket.com/ws/market',\n        'wss://clob.polymarket.com/markets',\n    ]\n    for url in urls:\n        await probe\\(url\\)\n\nasyncio.run\\(main\\(\\)\\)\n\" 2>&1)",
      "WebSearch",
      "Bash(cd /c/Users/aland/polybot && venv/Scripts/python.exe -c \"\nimport asyncio, logging\nlogging.basicConfig\\(level=logging.INFO, format='%\\(message\\)s'\\)\nfrom apis.ws_client import PolymarketWSClient\nfrom apis.book_cache import BookCache\n\nasync def test\\(\\):\n    token_id = '21742633143463906290569050155826241533067272736897614950488156847949938836455'\n    cache = BookCache\\(\\)\n    client = PolymarketWSClient\\([token_id], cache\\)\n\n    updates = []\n    async def cb\\(tid, c\\):\n        updates.append\\({'ask': c.best_ask\\(tid\\), 'bid': c.best_bid\\(tid\\)}\\)\n\n    client.on_update\\(cb\\)\n    try:\n        await asyncio.wait_for\\(client.run\\(\\), timeout=8\\)\n    except asyncio.TimeoutError:\n        pass\n\n    print\\(f'Stats: {client.stats}'\\)\n    if updates:\n        print\\(f'First update: {updates[0]}'\\)\n        print\\(f'Total callbacks: {len\\(updates\\)}'\\)\n    else:\n        print\\('No updates received'\\)\n\nasyncio.run\\(test\\(\\)\\)\n\" 2>&1)",
      "Bash(cd /c/Users/aland/polybot && venv/Scripts/python.exe -c \"\nimport asyncio, json, websockets\n\nasync def test\\(\\):\n    url = 'wss://ws-subscriptions-clob.polymarket.com/ws/market'\n    token_id = '21742633143463906290569050155826241533067272736897614950488156847949938836455'\n    async with websockets.connect\\(url\\) as ws:\n        await ws.send\\(json.dumps\\({\n            'auth': {},\n            'type': 'Market',\n            'markets': [],\n            'assets_ids': [token_id],\n        }\\)\\)\n        for _ in range\\(3\\):\n            try:\n                msg = await asyncio.wait_for\\(ws.recv\\(\\), timeout=5\\)\n                print\\('RAW:', msg[:500]\\)\n            except asyncio.TimeoutError:\n                print\\('\\(timeout waiting for message\\)'\\)\n                break\n\nasyncio.run\\(test\\(\\)\\)\n\" 2>&1)",
      "WebFetch(domain:docs.polymarket.com)",
      "Bash(cd /c/Users/aland/polybot && venv/Scripts/python.exe -c \"\nimport asyncio, json, websockets\n\nasync def test\\(\\):\n    url = 'wss://ws-subscriptions-clob.polymarket.com/ws/market'\n    token_id = '21742633143463906290569050155826241533067272736897614950488156847949938836455'\n    async with websockets.connect\\(url\\) as ws:\n        await ws.send\\(json.dumps\\({\n            'assets_ids': [token_id],\n            'type': 'market',\n            'custom_feature_enabled': True,\n        }\\)\\)\n        for _ in range\\(5\\):\n            try:\n                msg = await asyncio.wait_for\\(ws.recv\\(\\), timeout=6\\)\n                data = json.loads\\(msg\\)\n                print\\('TYPE:', type\\(data\\).__name__, '| LEN:', len\\(data\\) if isinstance\\(data, list\\) else 'N/A'\\)\n                item = data[0] if isinstance\\(data, list\\) and data else data\n                print\\('KEYS:', list\\(item.keys\\(\\)\\) if isinstance\\(item, dict\\) else item\\)\n                print\\('SAMPLE:', json.dumps\\(item\\)[:400] if isinstance\\(item, dict\\) else str\\(item\\)[:400]\\)\n                print\\(\\)\n            except asyncio.TimeoutError:\n                print\\('\\(timeout\\)'\\)\n                break\n\nasyncio.run\\(test\\(\\)\\)\n\" 2>&1)",
      "Bash(cd /c/Users/aland/polybot && venv/Scripts/python.exe -c \"\nfrom apis.gamma_api import get_active_markets\nmarkets = get_active_markets\\(limit=5\\)\nfor m in markets:\n    toks = m.get\\('tokens', []\\)\n    if len\\(toks\\) >= 2:\n        print\\('market:', m.get\\('id'\\), '|', m.get\\('question',''\\)[:50]\\)\n        for t in toks:\n            print\\('  token_id:', t.get\\('token_id'\\), '| outcome:', t.get\\('outcome'\\)\\)\n        break\n\" 2>&1)",
      "Bash(cd /c/Users/aland/polybot && venv/Scripts/python.exe -c \"\nfrom apis.gamma_api import get_active_markets\nmarkets = get_active_markets\\(limit=20\\)\nprint\\('Got', len\\(markets\\), 'markets'\\)\nfor m in markets[:5]:\n    print\\(m.get\\('question',''\\)[:60], '| tokens:', len\\(m.get\\('tokens',[]\\)\\)\\)\n\" 2>&1)",
      "Bash(cd /c/Users/aland/polybot && venv/Scripts/python.exe -c \"\nfrom apis.gamma_api import get_active_markets\nmarkets = get_active_markets\\(limit=3\\)\nimport json\nprint\\(json.dumps\\(markets[0], indent=2\\)[:1500]\\)\n\" 2>&1)",
      "Bash(cd /c/Users/aland/polybot && venv/Scripts/python.exe -c \"\nfrom apis.gamma_api import get_active_markets\nmarkets = get_active_markets\\(limit=1\\)\nprint\\('Keys:', list\\(markets[0].keys\\(\\)\\)\\)\n\" 2>&1)",
      "Bash(cd /c/Users/aland/polybot && venv/Scripts/python.exe -c \"\nfrom apis.gamma_api import get_active_markets\nimport json\nmarkets = get_active_markets\\(limit=5\\)\nfor m in markets[:3]:\n    print\\('q:', m['question'][:50]\\)\n    print\\('  clobTokenIds:', m.get\\('clobTokenIds'\\)\\)\n    print\\('  outcomes:', m.get\\('outcomes'\\)\\)\n    print\\('  outcomePrices:', m.get\\('outcomePrices'\\)\\)\n    print\\(\\)\n\" 2>&1)",
      "Bash(cd /c/Users/aland/polybot && venv/Scripts/python.exe -c \"\nimport asyncio, logging, json\nlogging.basicConfig\\(level=logging.INFO, format='%\\(message\\)s'\\)\nfrom apis.gamma_api import get_active_markets\nfrom apis.ws_client import TokenRegistry, PolymarketWSClient, _extract_token_ids\nfrom apis.book_cache import BookCache\n\n# 1. Build registry from live markets\nmarkets = get_active_markets\\(limit=50\\)\nreg = TokenRegistry\\(markets\\)\nprint\\(f'Registry: {len\\(reg\\)} markets, {len\\(reg.all_token_ids\\)} tokens'\\)\n\n# 2. Pick first token pair\nm = next\\(m for m in markets if _extract_token_ids\\(m\\)[0]\\)\nyes_tid, no_tid = _extract_token_ids\\(m\\)\nprint\\(f'Testing: {m[\\\\\"question\\\\\"][:60]}'\\)\nprint\\(f'  YES: {yes_tid[:20]}...'\\)\nprint\\(f'  NO:  {no_tid[:20]}...'\\)\n\n# 3. Connect WS and wait for data\ncache = BookCache\\(\\)\nclient = PolymarketWSClient\\([yes_tid, no_tid], cache\\)\n\nupdates = []\nasync def cb\\(tid, c\\):\n    updates.append\\({'tid': tid[:16], 'ask': c.best_ask\\(tid\\), 'bid': c.best_bid\\(tid\\)}\\)\n\nclient.on_update\\(cb\\)\n\nasync def run\\(\\):\n    try:\n        await asyncio.wait_for\\(client.run\\(\\), timeout=10\\)\n    except asyncio.TimeoutError:\n        pass\n\nasyncio.run\\(run\\(\\)\\)\nprint\\(f'Stats: {client.stats}'\\)\nif updates:\n    print\\(f'Updates received: {len\\(updates\\)}'\\)\n    print\\(f'First: {updates[0]}'\\)\nelse:\n    print\\('No callbacks fired â€” checking cache directly:'\\)\n    print\\('  YES best_ask:', cache.best_ask\\(yes_tid\\)\\)\n    print\\('  NO  best_ask:', cache.best_ask\\(no_tid\\)\\)\n\" 2>&1)",
      "Bash(cd /c/Users/aland/polybot && venv/Scripts/python.exe -c \"\nfrom apis import extract_token_ids\nfrom apis.ws_client import TokenRegistry, PolymarketWSClient\nfrom strategies.arbitrage import scan_market\nfrom strategies.sports_divergence import find_divergences\nfrom apis.gamma_api import get_active_markets\n\n# 1. Imports clean\nprint\\('Imports: OK'\\)\n\n# 2. extract_token_ids on Gamma format\nmarkets = get_active_markets\\(limit=10\\)\nyes_tid, no_tid = extract_token_ids\\(markets[0]\\)\nassert yes_tid and no_tid, 'Token extraction failed'\nprint\\(f'extract_token_ids: OK  \\({yes_tid[:16]}... / {no_tid[:16]}...\\)'\\)\n\n# 3. TokenRegistry builds correctly\nreg = TokenRegistry\\(markets\\)\nassert len\\(reg\\) == 10\nassert reg.get_market\\(yes_tid\\) is not None\nprint\\(f'TokenRegistry: OK  \\({len\\(reg\\)} markets, {len\\(reg.all_token_ids\\)} tokens\\)'\\)\n\n# 4. scan_market on a live market \\(reads order book\\)\nresult = scan_market\\(markets[0]\\)\nprint\\(f'scan_market: OK  \\(result={result}\\)'\\)\n\" 2>&1)",
      "Bash(cd /c/Users/aland/polybot && venv/Scripts/python.exe -m pytest tests/ -v 2>&1)",
      "Bash(cd /c/Users/aland/polybot && venv/Scripts/python.exe -m pytest tests/ -v --tb=no -q 2>&1)",
      "Bash(cat:*)",
      "Bash(gh repo:*)",
      "Bash(tail:*)",
      "Bash(winget install:*)",
      "Bash(export PATH=\"$PATH:/c/Program Files/GitHub CLI\" && gh auth login --web 2>&1)",
      "Bash(export PATH=\"$PATH:/c/Program Files/GitHub CLI\" && gh auth status 2>&1)",
      "Bash(export PATH=\"$PATH:/c/Program Files/GitHub CLI\" && cd /c/Users/aland/polybot && gh repo create polybot --public --source=. --remote=origin --push 2>&1)",
      "Bash(cd /c/Users/aland/polybot && venv/Scripts/python.exe -m pytest tests/ -q --tb=short 2>&1)",
      "Bash(cd /c/Users/aland/polybot && export PATH=\"$PATH:/c/Program Files/GitHub CLI\" && git push 2>&1)",
      "Bash(true:*)",
      "WebFetch(domain:www.api-football.com)",
      "WebFetch(domain:www.sportmonks.com)",
      "WebFetch(domain:www.football-data.org)",
      "WebFetch(domain:sportsgameodds.com)",
      "Bash(cd /c/Users/aland/polybot && venv/Scripts/python.exe main.py scan --strategy value 2>&1)",
      "Bash(cd /c/Users/aland/polybot && venv/Scripts/python.exe -c \"\nimport requests\nkey = '90d7b12ccbbd4dbc19f0962800ae995c98cc7900d35d33e4da8a9919766b9a2d'\nurls = [\n    'https://odds-api.io/v1/sports',\n    'https://api.odds-api.io/v1/sports',\n    'https://odds-api.io/api/v1/sports',\n    'https://odds-api.io/sports',\n]\nfor url in urls:\n    try:\n        r = requests.get\\(url, params={'apiKey': key}, timeout=5\\)\n        print\\(f'{r.status_code} {url}'\\)\n        if r.status_code == 200:\n            print\\('  SAMPLE:', str\\(r.json\\(\\)\\)[:200]\\)\n    except Exception as e:\n        print\\(f'ERR {url}: {e}'\\)\n\" 2>&1)",
      "WebFetch(domain:odds-api.io)",
      "WebFetch(domain:docs.odds-api.io)",
      "Bash(cd /c/Users/aland/polybot && venv/Scripts/python.exe -c \"\nimport requests\nkey = '90d7b12ccbbd4dbc19f0962800ae995c98cc7900d35d33e4da8a9919766b9a2d'\n# Try v3 base with different auth methods\ntests = [\n    \\('https://api.odds-api.io/v3/sports', {'apiKey': key}\\),\n    \\('https://api.odds-api.io/v3/sports', {'api_key': key}\\),\n    \\('https://api.odds-api.io/v3/odds', {'sport': 'football', 'league': 'england-premier-league', 'apiKey': key}\\),\n]\nfor url, params in tests:\n    r = requests.get\\(url, params=params, timeout=5\\)\n    print\\(f'{r.status_code} {url}'\\)\n    if r.status_code == 200:\n        print\\('  SAMPLE:', str\\(r.json\\(\\)\\)[:300]\\)\n    else:\n        print\\('  BODY:', r.text[:200]\\)\n\" 2>&1)",
      "Bash(cd /c/Users/aland/polybot && venv/Scripts/python.exe -c \"\nimport requests, json\nkey = '90d7b12ccbbd4dbc19f0962800ae995c98cc7900d35d33e4da8a9919766b9a2d'\nbase = 'https://api.odds-api.io/v3'\n\n# Get leagues for football\nr = requests.get\\(f'{base}/leagues', params={'apiKey': key, 'sport': 'football'}, timeout=5\\)\nprint\\('Leagues status:', r.status_code\\)\nif r.status_code == 200:\n    print\\(json.dumps\\(r.json\\(\\)[:3], indent=2\\)\\)\nelse:\n    print\\(r.text[:300]\\)\nprint\\(\\)\n\n# Try events endpoint\nr2 = requests.get\\(f'{base}/events', params={'apiKey': key, 'sport': 'football', 'league': 'england-premier-league'}, timeout=5\\)\nprint\\('Events status:', r2.status_code\\)\nif r2.status_code == 200:\n    data = r2.json\\(\\)\n    print\\('Keys:', list\\(data[0].keys\\(\\)\\) if isinstance\\(data, list\\) and data else data\\)\n    print\\(json.dumps\\(data[:1], indent=2\\)[:600]\\)\nelse:\n    print\\(r2.text[:300]\\)\n\" 2>&1)",
      "Bash(cd /c/Users/aland/polybot && venv/Scripts/python.exe -c \"\nimport requests, json\nkey = '90d7b12ccbbd4dbc19f0962800ae995c98cc7900d35d33e4da8a9919766b9a2d'\nbase = 'https://api.odds-api.io/v3'\n\n# Get upcoming events\nr = requests.get\\(f'{base}/events', params={'apiKey': key, 'sport': 'football', 'league': 'england-premier-league', 'status': 'upcoming'}, timeout=5\\)\nprint\\('Upcoming events:', r.status_code\\)\nevents = r.json\\(\\)\nprint\\('Count:', len\\(events\\)\\)\nif events:\n    print\\('First event:', json.dumps\\(events[0], indent=2\\)\\)\n    eid = events[0]['id']\n\n    # Get odds for this event\n    r2 = requests.get\\(f'{base}/odds', params={'apiKey': key, 'eventId': eid}, timeout=5\\)\n    print\\(\\)\n    print\\('Odds status:', r2.status_code\\)\n    if r2.status_code == 200:\n        odds = r2.json\\(\\)\n        print\\('Odds keys:', list\\(odds.keys\\(\\)\\) if isinstance\\(odds, dict\\) else type\\(odds\\)\\)\n        print\\(json.dumps\\(odds, indent=2\\)[:800]\\)\n    else:\n        print\\(r2.text[:300]\\)\n\" 2>&1)",
      "Bash(venv/Scripts/python.exe:*)",
      "WebFetch(domain:the-odds-api.com)",
      "WebFetch(domain:betsapi.com)",
      "WebFetch(domain:sharpapi.io)"
    ]
  }
}
